{{ $trackingURL := $.Param "tracking-base-url" | urls.Parse }}

<meta 
    http-equiv="Content-Security-Policy" 
    content="
        default-src 'self';
        base-uri 'self';
        connect-src 'self' https://wwwapi.serviceeu.com {{ if eq (getenv "HUGO_ENV") "development" }}ws://localhost:*{{ end }};
        frame-src 'self' {{ $.Param "tracking-base-url" }};
        form-action 'self';
        font-src 'self' https://wwwapi.serviceeu.com;
        img-src 'self' https://wwwapi.serviceeu.com https://*.thunderforest.com {{ $trackingURL.Scheme }}://{{ $trackingURL.Host }};
        media-src 'self';
        object-src 'none';
        script-src 'self' https://wwwapi.serviceeu.com {{ $trackingURL.Scheme }}://{{ $trackingURL.Host }} {{ if eq (getenv "HUGO_ENV") "development" }}'unsafe-inline'{{ end }};
        style-src 'self' 'unsafe-inline' https://wwwapi.serviceeu.com;
        worker-src 'self';
    ">

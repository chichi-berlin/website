<nav class="component__nav-aside" id="side-menu">
    
    {{ $contentsPath := "./app/contents" }}
    {{ $section := .Section }}
    {{ $parent := .Parent }}
    {{ $currentPage := . }}   
    
    <nav class="menu__breadcrumbs" aria-label="You are here">
        <ol>
            {{ template "breadcrumb" dict "parentPage" $parent "currentPage" $currentPage "global" $ }}
        </ol>
    </nav>
    
    <div class="menu__wrap" parent="{{ printf "%#v" $parent.IsHome }}">
        {{ $currentSectionPath := .Dir }}
        
        <ul class="menu__level menu__level--current">
            
            {{ .Scratch.Set "sections" $parent.Sections }}
            {{ if $parent.IsHome }}
                {{ .Scratch.Set "sections" $currentPage.Sections }}
            {{ end }}
            
            {{ range sort (.Scratch.Get "sections") "Params.weight" "asc" }}
            {{ if .IsNode }}
            <li class="menu__item" data="node">
                <a class="menu__link {{ if eq . $currentPage }}menu__link--current{{ end }}"
                   data-submenu="submenu--{{ delimit (split (trim .URL "/") "/") "-" }}" 
                   href="{{ .URL | relLangURL }}">
                    {{ .LinkTitle }}
                </a>
            </li>
            {{ end }}
            {{ end }}
        
        </ul>
    </div>
</nav>





{{ define "breadcrumb" }}
    {{ $pagesInTopMenu := where .global.Site.Menus.top ".Page.UniqueID" .parentPage.UniqueID }}    

    {{ if and (not .parentPage.IsHome) }}

    {{ if .parentPage.Parent }}
        {{ template "breadcrumb" dict "parentPage" .parentPage.Parent "currentPage" .currentPage "global" .global }}
    {{ end }}

    <li>        
        <a href="{{ .parentPage.URL | relLangURL }}" class="">
            {{ .parentPage.LinkTitle }}    
        </a>
    </li>

    {{ end }}
{{ end }}

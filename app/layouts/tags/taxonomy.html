{{ define "main" }}

{{ $itemsPerPage := $.Param "itemsPerPage" | default 5 }}
{{ $articleList := .Data.Pages }}

{{ $paginator := .Paginate ($articleList.ByDate.Reverse) $itemsPerPage }}
<section class="edge-spacer--h">

    <h1 class="page-title">{{ i18n "tag" 1 }}: {{ .Title }}</h1>
    <p class="page-subtitle">
        {{ i18n "page" 1 }}
        {{ $paginator.PageNumber }}
        {{ i18n "page-number-separator" }}
        {{ $paginator.TotalPages }}
    </p>

    <div class="row-2-cols">
        <article class="col--left">
        {{ if gt (len $articleList) 0 }}
            <ul class="articles">
                {{ range $articleList }}
                <li>
                    {{ partial "components/article-preview.html" . }}
                </li>
                {{ end }}
            </ul>
            
            {{ partial "components/articles-list-nav.html" $paginator }}
        {{ else }}
            {{ i18n "no-article" }}
        {{ end }}
        </article>
        
        {{ partial "components/blog-sidebar.html" . }}
    </div>
    
</section>
{{ end }}
